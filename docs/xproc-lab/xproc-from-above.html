<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>XProc Zone - XProc From Above</title>
      <script src="./../site/zone-themeTime.js"
              type="text/javascript">
      </script>
      <link rel="preconnect"
            href="https://fonts.googleapis.com">
      <link crossorigin="anonymous"
            rel="preconnect"
            href="https://fonts.gstatic.com">
      <link rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&amp;family=Noto+Serif:ital,wght@0,100..900;1,100..900&amp;display=swap">
      <link rel="icon"
            href="./../site/zed.svg"
            type="image/svg+xml">
      <link rel="stylesheet"
            href="../site/zone-main.css">
      <meta charset="utf-8">
      <style type="text/css" xml:space="preserve">

aside.fig_set { display: flex; gap: 0.7em; width: 98vw;
    flex-flow: row wrap; align-items: flex-start; }

div.fig_block { flex: auto; max-width: fit-content; color: black;
  background-color: whitesmoke; border: medium solid midnightblue; padding: 0.3em;
  margin-top: 0.8em
  
  p, ul { max-width: 48em }
  a { color: slateblue }
  a:visited { color: midnightblue }
  
  }

.fig_block *:first-child { margin-top: 0.2em }

pre.eg { max-width: fit-content; font-size: larger;
  background-color: ivory; border: thin inset steelblue; padding: 0.3em;
  margin-top: 0.8em }

.panel summary { font-size: 120% }
.panel details summary { font-size: inherit }

.panel details { border-top: thin solid var(--contrast-face);
    padding-top: 0.4em; margin-top: 0.6em; }
      </style>
   </head>
   <body onload="setTheme()"
         id="page">
      <div id="bannerbar">
         <div id="sitenav">
            <span>XProc Zone </span>
            <a class="internal"
               href="./../index.html">Home</a>
            <span> | </span>
            <a href="https://github.com/wendellpiez/xproc-zone">Code</a>
         </div>
         <div id="themepick">
            <!-- Using the interface defined in zone-themeTime.js -->
            <p class="dawn set">
               <a href="?by=dawn">dawn</a>
            </p>
            <p class="day set">
               <a href="?by=day">day</a>
            </p>
            <p class="dusk set">
               <a href="?by=dusk">dusk</a>
            </p>
            <p class="night set">
               <a href="?by=night">night</a>
            </p>
            <p class="set">
               <a href="?by=now">now</a>
            </p>
            <p class="set none">
               <a href="?by=none">none</a>
            </p>
         </div>
      </div>
      <main>
         <svg id="zone_logo"
              width="100%"
              height="100%"
              viewBox="0 0 100 100"
              preserveAspectRatio="xMidYMid meet"
              zoomAndPan="magnify"
              version="1.0"
              contentScriptType="text/ecmascript"
              contentStyleType="text/css"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink">
            <defs>
               <path id="zee"
                     d="M -20 -27 Q 0 -27 20 -30 L -20 0 C 30 0 30 20 0 30 C -30 40 -30 10 30 0">
               </path>
               <!-- Neon Glow Filter -->
               <filter id="neon"
                       xlink:type="simple"
                       xlink:show="other"
                       xlink:actuate="onLoad">
                  <feGaussianBlur stdDeviation="4">
                  </feGaussianBlur>
                  <feComponentTransfer result="glow">
                     <feFuncA type="linear"
                              slope="1">
                     </feFuncA>
                  </feComponentTransfer>
                  <feMerge>
                     <feMergeNode in="glow">
                     </feMergeNode>
                     <feMergeNode in="SourceGraphic">
                     </feMergeNode>
                  </feMerge>
               </filter>
               <!--            -->
            </defs>
            <!--
    #logo #zone { fill: #534582; stroke: whitesmoke }
    #logo #zed { stroke: #3B7EFF }
    
    -->
            <!--<rect width="100%" height="100%" fill="black"/>-->
            <g transform="translate(50 50)">
               <g id="zone"
                  fill="blue"
                  stroke-width="1"
                  fill-opacity="0.3"
                  stroke-opacity="0.7"
                  stroke="white"
                  transform="rotate(40)">
                  <circle cx="0"
                          cy="0"
                          r="48">
                  </circle>
                  <circle cx="2"
                          cy="0"
                          r="40">
                  </circle>
                  <circle cx="4"
                          cy="0"
                          r="32">
                  </circle>
               </g>
               <g id="zed"
                  transform="scale(1.1)"
                  stroke-linejoin="round"
                  stroke-linecap="round"
                  fill="none"
                  stroke="white">
                  <use xlink:href="#zee"
                       stroke-width="8"
                       stroke-opacity="0.2"
                       filter="url(#neon)"
                       xlink:type="simple"
                       xlink:show="embed"
                       xlink:actuate="onLoad">
                  </use>
                  <use xlink:href="#zee"
                       stroke-width="4"
                       stroke-opacity="0.7"
                       xlink:type="simple"
                       xlink:show="embed"
                       xlink:actuate="onLoad">
                  </use>
               </g>
            </g>
         </svg>
         <header>
            <h1>XProc From Above</h1>
            <p>Brief tutorial overviews</p>
         </header>
         <ul class="buttonbar">
            <li>
               <a class="internal"
                  href="../xproc-pages.html">Links</a>
            </li>
            <li>
               <a class="internal"
                  href="index.html">Lab</a>
            </li>
            <li>
               <a class="clean"
                  href="xproc-step-list.html">Step List</a>
            </li>
            <li>
               <a class="clean"
                  href="zone-xproc-index.html">Index</a>
            </li>
            <li>
               <a href="https://github.com/wendellpiez/xproc-zone/tree/main/projects/Worksheets">Worksheets</a>
            </li>
         </ul>
         <p>From a height the broader outlines come into view.</p>
      </main>
      <details class="panel"
               xmlns="">
         <summary>XProc from Orbit</summary>
         <p xmlns="http://www.w3.org/1999/xhtml">XProc is a data processing technology for digital data. While it is an XML-based technology using XML syntax, it can work with many kinds of data, including common text-based formats such as JSON.</p>
         <p xmlns="http://www.w3.org/1999/xhtml">As a language, XProc describes <b>pipelines</b>. A pipeline combines a sequence or set of processes and applies them to specified inputs (<q>sources</q>) to create outputs (<q>results</q>).</p>
         <p xmlns="http://www.w3.org/1999/xhtml">Use XProc to build and support complex workflows in document production, data conversion, and information exchange.</p>
         <details>
            <summary>Pipelines and steps</summary>
            <ul xmlns="http://www.w3.org/1999/xhtml">
               <li>A pipeline is made of steps</li>
               <li>A pipeline can also be used as a step, when declared with or imported into another pipeline</li>
               <li>XProc defines libraries of standard, reusable steps for all processors, supporting many common operations</li>
               <li>You can also design and use new steps, in and with your own XProc</li>
            </ul>
            <aside class="fig_set"
                   xmlns="http://www.w3.org/1999/xhtml">
               <div class="fig_block">
                  <h4>Example <a class="eg"
                        href="https://github.com/wendellpiez/xproc-zone/blob/main/projects/PlanetXProc/src/starter.xpl">src/starter.xpl</a>
                  </h4>
                  <p>A very simple pipeline with three steps.</p>
                  <pre class="eg">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xD;
&lt;p:declare-step version="3.0" xmlns:p="http://www.w3.org/ns/xproc"&gt;&#xD;
  &lt;!-- A pipeline is defined with p:declare-step --&gt;&#xD;
  &#xD;
  &lt;!-- First step reads a file from the file system --&gt;&#xD;
  &lt;p:load href="../xproc-from-orbit.md" content-type="text/plain"/&gt;&#xD;
  &#xD;
  &lt;!-- Second step does its best to produce HTML from Markdown input --&gt;&#xD;
  &lt;p:markdown-to-html/&gt;&#xD;
&#xD;
  &lt;!-- Third step saves the result --&gt;&#xD;
  &lt;p:store href="../out/xproc-from-orbit.html"/&gt;&#xD;
  &#xD;
&lt;/p:declare-step&gt;&#xD;

            </pre>
               </div>
               <div class="fig_block">
                  <h4>Example <a class="eg"
                        href="https://github.com/wendellpiez/xproc-zone/blob/main/projects/PlanetXProc/src/producer.xpl">src/producer.xpl</a>
                  </h4>
                  <p>A simple four-step pipeline that includes an imported step. The imported step's name is in the developer's (project) namespace, in this case the zone: namespace.</p>
                  <pre class="eg">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xD;
&lt;p:declare-step version="3.0"&#xD;
  xmlns:p="http://www.w3.org/ns/xproc"&#xD;
  xmlns:zone="http://wendellpiez.com/ns/xproc-zone"&gt;&#xD;
  &#xD;
  &lt;!-- Step 0: Not really a step, this imports a pipeline&#xD;
       (with a step declaration) or library (with a set of them) --&gt;&#xD;
  &lt;p:import href="_make-orbital-markup.xpl"/&gt;&#xD;
  &#xD;
  &lt;!-- Step 1: Loads a file as plain text --&gt;&#xD;
  &lt;p:load href="../xproc-from-orbit.md" content-type="text/plain"/&gt;&#xD;
&#xD;
  &lt;!-- Step 2: Makes HTML, if possible (supported in XML Calabash) --&gt;&#xD;
  &lt;p:markdown-to-html/&gt;&#xD;
&#xD;
  &lt;!-- Step 3: Calls an imported step --&gt;&#xD;
  &lt;zone:make-orbital-markup/&gt;&#xD;
  &#xD;
  &lt;!-- Step 4: Saves the result --&gt;&#xD;
  &lt;p:store href="../xproc-from-orbit.xml" message="SAVING xproc-from-orbit.xml ..."&#xD;
    serialization="map { 'indent': true() }"/&gt;&#xD;
  &#xD;
&lt;/p:declare-step&gt;&#xD;

            </pre>
               </div>
            </aside>
         </details>
         <details>
            <summary>How to write a pipeline</summary>
            <p xmlns="http://www.w3.org/1999/xhtml">An XProc pipeline takes the form of an arrangement of steps.</p>
            <aside class="fig_set"
                   xmlns="http://www.w3.org/1999/xhtml">
               <div class="fig_block">
                  <h4>Example <a class="eg"
                        href="https://github.com/wendellpiez/xproc-zone/blob/main/projects/PlanetXProc/src/moresteps.xpl">src/moresteps.xpl</a>
                  </h4>
                  <pre class="eg">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xD;
&lt;p:declare-step version="3.0" xmlns:p="http://www.w3.org/ns/xproc"&gt;&#xD;
  &#xD;
  &lt;!-- Reads a file as plain text --&gt;&#xD;
  &lt;p:load href="../xproc-from-orbit.md" content-type="text/plain"/&gt;&#xD;
  &#xD;
  &lt;!-- If the processor supports the step, Markdown is converted to HTML --&gt;&#xD;
  &lt;p:markdown-to-html/&gt;&#xD;
&#xD;
  &lt;!-- Applying an XSLT transformation using the indicated stylesheet --&gt;&#xD;
  &lt;p:xslt&gt;&#xD;
    &lt;p:with-input port="stylesheet" href="xslt/html-resuscitate.xsl"/&gt;&#xD;
  &lt;/p:xslt&gt;&#xD;
  &#xD;
  &lt;!-- Saves a file in the ../out/ folder --&gt;&#xD;
  &lt;p:store href="../out/xproc-from-orbit.html"/&gt;&#xD;
  &#xD;
&lt;/p:declare-step&gt;&#xD;

            </pre>
               </div>
            </aside>
            <p xmlns="http://www.w3.org/1999/xhtml">We say <q>arrangement</q> here since steps can accommodate as many inputs and outputs as needed.</p>
            <aside class="fig_set"
                   xmlns="http://www.w3.org/1999/xhtml">
               <div class="fig_block">
                  <h4>Example <a class="eg"
                        href="https://github.com/wendellpiez/xproc-zone/blob/main/projects/PlanetXProc/src/double-validate.xpl">src/double-validate.xpl</a>
                  </h4>
                  <pre class="eg">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xD;
&lt;p:declare-step version="3.0"&#xD;
  xmlns:p="http://www.w3.org/ns/xproc"&gt;&#xD;
  &#xD;
  &lt;!-- Reads an XML document --&gt;&#xD;
  &lt;p:load href="../xproc-from-orbit.xml"/&gt;&#xD;
  &#xD;
  &lt;!-- A validation step with two input ports, 'source' and 'schema'&#xD;
       and two output ports, 'result' and 'report'&#xD;
       sc https://spec.xproc.org/master/head/validation/#c.validate-with-relax-ng--&gt;  &#xD;
  &lt;p:validate-with-relax-ng assert-valid="false" name="TEI-structures"&gt;&#xD;
    &lt;!-- 'source' port is picked up implicitly; explicitly declare 'schema' port --&gt;&#xD;
    &lt;p:with-input port="schema" href="schemas/orbital-promoted.rnc"/&gt;&#xD;
  &lt;/p:validate-with-relax-ng&gt;&#xD;
  &#xD;
  &lt;!-- Another validation step with similar ports --&gt;&#xD;
  &lt;p:validate-with-schematron   assert-valid="false" name="other-regularities"&gt;&#xD;
    &lt;!-- 'source' comes from the preceding step's 'result' --&gt;&#xD;
    &lt;p:with-input port="schema" href="schemas/orbital-stability.sch"/&gt;&#xD;
  &lt;/p:validate-with-schematron&gt;&#xD;
  &#xD;
  &lt;p:wrap-sequence wrapper="VALIDATION-REPORTS"&gt;&#xD;
    &lt;p:with-input&gt;&#xD;
      &lt;!-- Reading in 'report' output ports from earlier steps --&gt;&#xD;
      &lt;p:pipe port="report" step="TEI-structures"/&gt;&#xD;
      &lt;p:pipe port="report" step="other-regularities"/&gt;&#xD;
    &lt;/p:with-input&gt;&#xD;
  &lt;/p:wrap-sequence&gt;&#xD;
  &#xD;
  &lt;!-- Saving the combined report --&gt;&#xD;
  &lt;p:store href="../out/validation-reports.xml" serialization="map { 'indent': true() }"/&gt;&#xD;
&#xD;
&lt;/p:declare-step&gt;&#xD;

            </pre>
               </div>
            </aside>
         </details>
      </details>
      <details class="panel"
               xmlns="">
         <summary>XProc from 40,000 Feet</summary>
         <details>
            <summary>I/O, ports and documents</summary>
            <ul xmlns="http://www.w3.org/1999/xhtml">
               <li>Pipelines, and steps, can accept one or more designated inputs, or none - they can accept inputs provided at runtime, or find and load data sources, or both, or generate their own</li>
               <li>Steps can also expose processing results as outputs, and also interact with your system, writing files on disk or communicating through other channels</li>
               <li>The connecting points on an XProc step are called its <b>ports</b>
               </li>
               <li>By means of ports, we pass documents into steps and get documents out - and while XProc calls them <b>documents</b>, they can be pretty much any kind of data</li>
               <li>When a pipeline is used as a step in another pipeline it can be defined with ports for connecting to other steps</li>
               <li>The <i>composability</i> of steps â€” i.e., the ability to break down large problems into small steps, and to combine the steps (including complete pipelines) in whatever order needed â€” is key to the efficiency and power offered by XProc</li>
            </ul>
            <aside class="fig_set"
                   xmlns="http://www.w3.org/1999/xhtml">
               <div class="fig_block">
                  <h4>Example <a class="eg"
                        href="https://github.com/wendellpiez/xproc-zone/blob/main/projects/PlanetXProc/src/double-validate.xpl">src/double-validate.xpl</a>
                  </h4>
                  <p>This pipeline (same example) validates its input twice and collects validation reports into a single document.</p>
                  <pre class="eg">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xD;
&lt;p:declare-step version="3.0"&#xD;
  xmlns:p="http://www.w3.org/ns/xproc"&gt;&#xD;
  &#xD;
  &lt;!-- Reads an XML document --&gt;&#xD;
  &lt;p:load href="../xproc-from-orbit.xml"/&gt;&#xD;
  &#xD;
  &lt;!-- A validation step with two input ports, 'source' and 'schema'&#xD;
       and two output ports, 'result' and 'report'&#xD;
       sc https://spec.xproc.org/master/head/validation/#c.validate-with-relax-ng--&gt;  &#xD;
  &lt;p:validate-with-relax-ng assert-valid="false" name="TEI-structures"&gt;&#xD;
    &lt;!-- 'source' port is picked up implicitly; explicitly declare 'schema' port --&gt;&#xD;
    &lt;p:with-input port="schema" href="schemas/orbital-promoted.rnc"/&gt;&#xD;
  &lt;/p:validate-with-relax-ng&gt;&#xD;
  &#xD;
  &lt;!-- Another validation step with similar ports --&gt;&#xD;
  &lt;p:validate-with-schematron   assert-valid="false" name="other-regularities"&gt;&#xD;
    &lt;!-- 'source' comes from the preceding step's 'result' --&gt;&#xD;
    &lt;p:with-input port="schema" href="schemas/orbital-stability.sch"/&gt;&#xD;
  &lt;/p:validate-with-schematron&gt;&#xD;
  &#xD;
  &lt;p:wrap-sequence wrapper="VALIDATION-REPORTS"&gt;&#xD;
    &lt;p:with-input&gt;&#xD;
      &lt;!-- Reading in 'report' output ports from earlier steps --&gt;&#xD;
      &lt;p:pipe port="report" step="TEI-structures"/&gt;&#xD;
      &lt;p:pipe port="report" step="other-regularities"/&gt;&#xD;
    &lt;/p:with-input&gt;&#xD;
  &lt;/p:wrap-sequence&gt;&#xD;
  &#xD;
  &lt;!-- Saving the combined report --&gt;&#xD;
  &lt;p:store href="../out/validation-reports.xml" serialization="map { 'indent': true() }"/&gt;&#xD;
&#xD;
&lt;/p:declare-step&gt;&#xD;

            </pre>
               </div>
            </aside>
         </details>
         <details>
            <summary>Ports, steps, sources and results</summary>
            <p xmlns="http://www.w3.org/1999/xhtml">Ports go in only one direction: they are for <b>input</b> or <b>output</b>, never both. One of the input ports will be designated as <b>primary</b>, while others are <b>secondary</b>. Similarly, one and only one of the output ports may be designated as primary. Not all steps have secondary ports, but some steps make little sense without them.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">The conventional name for the primary <i>input</i> port is <code>source</code>. The conventional name for the primary <i>output</i> port is <code>result</code>. These names correspond with the uses of these terms in XSLT and XQuery.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">It is sometimes useful for a step to have output but no input (like <code>p:load</code>), or input with no output (like <code>p:sink</code>). And not all steps produce modifications of inputs among their outputs. For example, <code>p:directory-list</code> has no input but produces XML on its <code>result</code> port listing the contents of a file system directory.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">The <code>source</code> and <code>result</code> ports can carry <i>sequences</i> when they are defined as such on their steps - and when permitted to be sequences they may also be <i>empty</i>, with no documents bound to them.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">While the the primary ports will ordinarily be named <code>source</code> and <code>result</code>, the names of secondary ports are usually more specifically functional, to indicate what roles they play for their steps. For example, validation steps all have a <code>schema</code> secondary input port, for their schemas; the <code>p:insert</code> step has an <code>insertion</code> port for the data to be inserted, and so forth. If an input port is named <code>stylesheet</code>, you have some idea of what the step might do.</p>
         </details>
         <details>
            <summary>Steps with implicit port connections</summary>
            <p xmlns="http://www.w3.org/1999/xhtml">XProc syntax can be fairly concise and clean - at least, as XML-based formats go - because it has sensible fallback rules and some nice ways of keeping syntax simple.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">One important example: as long as steps in your pipeline are to be applied in sequence, their connections do not have to be shown. It has been suggested they <i>snap together</i>.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">The XProc feature in play here is called the <a href="https://spec.xproc.org/3.0/xproc/#connecting-the-drp">default readable port</a>. The concept is simple. Any step with a primary input port that is not connected explicitly is bound to the primary output of the immediately preceding step.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">This works well, with the caveat that steps that have no input ports don't connect like this, even when given in sequence - and steps with no output ports can't be connected as inputs at all. Know your steps.</p>
            <aside class="fig_set"
                   xmlns="http://www.w3.org/1999/xhtml">
               <div class="fig_block">
                  <h4>Example <a class="eg"
                        href="https://github.com/wendellpiez/xproc-zone/blob/main/projects/PlanetXProc/src/moresteps.xpl">src/moresteps.xpl</a>
                  </h4>
                  <pre class="eg">&lt;?xml version="1.0" encoding="UTF-8"?&gt;&#xD;
&lt;p:declare-step version="3.0" xmlns:p="http://www.w3.org/ns/xproc"&gt;&#xD;
  &#xD;
  &lt;!-- Reads a file as plain text --&gt;&#xD;
  &lt;p:load href="../xproc-from-orbit.md" content-type="text/plain"/&gt;&#xD;
  &#xD;
  &lt;!-- If the processor supports the step, Markdown is converted to HTML --&gt;&#xD;
  &lt;p:markdown-to-html/&gt;&#xD;
&#xD;
  &lt;!-- Applying an XSLT transformation using the indicated stylesheet --&gt;&#xD;
  &lt;p:xslt&gt;&#xD;
    &lt;p:with-input port="stylesheet" href="xslt/html-resuscitate.xsl"/&gt;&#xD;
  &lt;/p:xslt&gt;&#xD;
  &#xD;
  &lt;!-- Saves a file in the ../out/ folder --&gt;&#xD;
  &lt;p:store href="../out/xproc-from-orbit.html"/&gt;&#xD;
  &#xD;
&lt;/p:declare-step&gt;&#xD;

            </pre>
               </div>
               <div class="fig_block">
                  <h4>Example <a class="eg"
                        href="https://github.com/wendellpiez/xproc-zone/blob/main/projects/PlanetXProc/src/moresteps-explicit.xpl">src/moresteps-explicit.xpl</a>
                  </h4>
                  <p>The same pipeline, with connections spelled out.</p>
                  <pre class="eg">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;p:declare-step version="3.0" xmlns:p="http://www.w3.org/ns/xproc"&gt;
  
  &lt;p:load name="loading" href="../xproc-from-orbit.md" content-type="text/plain"/&gt;
  
  &lt;p:markdown-to-html name="making-html"&gt;
    &lt;p:with-input port="source"&gt;
      &lt;p:pipe port="result" step="loading"/&gt;
    &lt;/p:with-input&gt;
  &lt;/p:markdown-to-html&gt;

  &lt;p:xslt name="transforming"&gt;
    &lt;p:with-input port="source"&gt;
      &lt;p:pipe port="result" step="making-html"/&gt;
    &lt;/p:with-input&gt;
    &lt;p:with-input port="stylesheet"&gt;
      &lt;p:document href="xslt/html-resuscitate.xsl"/&gt;
    &lt;/p:with-input&gt;
  &lt;/p:xslt&gt;
  
  &lt;p:store href="../out/xproc-from-orbit.xml"&gt;  
    &lt;p:with-input port="source"&gt;
      &lt;p:pipe port="result" step="transforming"/&gt;
    &lt;/p:with-input&gt;
  &lt;/p:store&gt;
  
&lt;/p:declare-step&gt;
            </pre>
               </div>
            </aside>
         </details>
         <details>
            <summary>Knowing your formats</summary>
            <p xmlns="http://www.w3.org/1999/xhtml">XProc comes with native support for reading and parsing XML, HTML, JSON, and text-based formats, including inputs defined with regular grammars using <a href="https://invisiblexml.org">Invisible XML (ixml)</a>.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">All of these types of data, and others, can be passed from one step to another, as long as both steps can accommodate the given format or media type.</p>
            <aside class="fig_set"
                   xmlns="http://www.w3.org/1999/xhtml">
               <div class="fig_block">
                  <h4>Example <a class="eg"
                        href="https://github.com/wendellpiez/xproc-zone/blob/main/projects/PlanetXProc/src/read-json.xpl">src/read-json.xpl</a>
                  </h4>
                  <p>With map and array object types, XPath 3.0/3.1 supports JSON natively.</p>
                  <pre class="eg">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;p:declare-step version="3.0" xmlns:p="http://www.w3.org/ns/xproc"
  xmlns:array="http://www.w3.org/2005/xpath-functions/array"&gt;
  &lt;!-- A pipeline is defined with p:declare-step --&gt;

  &lt;p:output serialization="map { 'indent': true(), 'omit-xml-declaration': true() }"/&gt;

  &lt;!-- Reads in a JSON literal (this time) --&gt;
  &lt;p:input port="source"&gt;
    &lt;p:inline content-type="application/json" expand-text="false" xml:space="preserve"&gt;{    
"title": "TEI P4: Guidelines for Electronic Text Encoding and Interchange (XML-compatible edition)",
"date": "2004",
"contributors": [
  { "role": "editor",
    "indexName": "Sperberg McQueen, C. Michael",
    "displayName": "C. M. Sperberg-McQueen" },
  { "role": "editor, XML conversion",
    "indexName": "Burnard, Lou",
    "displayName": "Lou Burnard" },
  { "role": "XML conversion",
    "indexName": "Bauman, Syd",
    "displayName": "Syd Bauman" },
  { "role": "XML conversion",
    "indexName": "DeRose, Steven J.",
    "displayName": "Steven DeRose" },
  { "role": "XML conversion",
    "indexName": "Rahtz, Sebastian",
    "displayName": "Sebastian Rahtz" } ],
"archive": "https://www.tei-c.org/Vault/P4/doc/html/"
}
    &lt;/p:inline&gt;
&lt;/p:input&gt;

  &lt;p:variable name="cit" select="."/&gt;

  &lt;!-- Makes an XDM sequence from the array contained in the map --&gt;
  &lt;!-- New in XPath 3.1, the ? lookup operator returns a value from a map by its key (property name) --&gt;
  &lt;p:variable name="contribs" select="array:flatten($cit?contributors)"/&gt;

  &lt;p:identity&gt;
    &lt;p:with-input&gt;
      &lt;citation&gt;{ head($contribs)?indexName },{ ' and'[empty($contribs[3])] } {
        $contribs[2]?displayName }{ $contribs[3]!', et al' }. "{ $cit?title }", { $cit?date }. {
        $cit?archive ! (. || '.') }&lt;/citation&gt;
    &lt;/p:with-input&gt;
  &lt;/p:identity&gt;

&lt;/p:declare-step&gt;

            </pre>
               </div>
            </aside>
         </details>
         <details>
            <summary>Powerful embedded languages</summary>
            <p xmlns="http://www.w3.org/1999/xhtml">XPath, XSLT, and XQuery all play well with XProc, which is designed first and foremost to accommodate these kindred technologies.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">XProc steps can either invoke or embed instances of these declarative processing languages, or others.</p>
            <aside class="fig_set"
                   xmlns="http://www.w3.org/1999/xhtml">
               <div class="fig_block">
                  <h4>Example <a class="eg"
                        href="https://github.com/wendellpiez/xproc-zone/blob/main/projects/PlanetXProc/src/some-xquery.xpl">src/some-xquery.xpl</a>
                  </h4>
                  <pre class="eg">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;p:declare-step version="3.0" xmlns:p="http://www.w3.org/ns/xproc"
  xmlns:tei="http://www.tei-c.org/ns/1.0" exclude-inline-prefixes="#all"&gt;

  &lt;p:output serialization="map { 'indent': true() }"/&gt;

  &lt;p:load href="../xproc-from-orbit.xml"/&gt;

  &lt;p:xquery&gt;
    &lt;p:with-input port="query" expand-text="false"&gt;
      &lt;LINKLIST&gt;{ //tei:ref/ &lt;a href="{ @target }"&gt;{ string(.) }&lt;/a&gt; }&lt;/LINKLIST&gt;
    &lt;/p:with-input&gt;
  &lt;/p:xquery&gt;

  &lt;p:namespace-delete prefixes="tei"/&gt;

&lt;/p:declare-step&gt;

            </pre>
               </div>
            </aside>
         </details>
         <details>
            <summary>Options</summary>
            <p xmlns="http://www.w3.org/1999/xhtml">In addition to inputs and outputs (connection ports), steps can also have <b>options</b>.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">These provide runtime configurations when invoking steps and pipelines.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">For some steps, certain options are required: for example, to designate which nodes to delete on a <code>p:delete</code> step a <code>match</code> option must be set.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">Values assigned to options can be simple (string value flags) or complex (such as map objects, or expressions to be evaluated).</p>
            <p xmlns="http://www.w3.org/1999/xhtml">Its ports and options together provide an <i>interface</i> for using a step.</p>
            <p xmlns="http://www.w3.org/1999/xhtml">Options can be set on steps using long syntax (<code>p:with-option</code>), but they are more commonly set using attributes. One example: the <code>parameters</code> attribute on a <code>p:xslt</code> step, which is used to send runtime stylesheet parameters (bound to a map object) into an XSLT transformation.</p>
            <aside class="fig_set"
                   xmlns="http://www.w3.org/1999/xhtml">
               <div class="fig_block">
                  <h4>Example <a class="eg"
                        href="https://github.com/wendellpiez/xproc-zone/blob/main/projects/PlanetXProc/src/test-landing.xpl">src/test-landing.xpl</a>
                  </h4>
                  <p>Parameters are sent to the stylesheet using an XProc option (in attribute syntax).</p>
                  <pre class="eg">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;p:declare-step xmlns:p="http://www.w3.org/ns/xproc"
  version="3.0" xmlns="http://www.w3.org/1999/xhtml"&gt;

  &lt;!-- Tests an HTML production run with $noisy = true() --&gt;

  &lt;!-- Reads XML source and XIncludes sample files --&gt;
  &lt;p:xinclude&gt;
    &lt;p:with-input href="../xproc-from-orbit.xml"/&gt;
  &lt;/p:xinclude&gt;

  &lt;p:xslt parameters="map { 'noisy': true() }"&gt;
    &lt;p:with-input port="stylesheet" href="xslt/orbital-lander.xsl"/&gt;
  &lt;/p:xslt&gt;
    
&lt;/p:declare-step&gt;

            </pre>
               </div>
            </aside>
         </details>
         <details>
            <summary>Foundations of XProc</summary>
            <p xmlns="http://www.w3.org/1999/xhtml">The more you know, the better you feel.</p>
            <ul xmlns="http://www.w3.org/1999/xhtml">
               <li>XML syntax</li>
               <li>XML namespaces</li>
               <li>XSLT, XQuery</li>
               <li>XPath (including XPath 3.0, 3.1) and XDM (XQuery and XPath Data Model)</li>
               <li>Plain text and Unicode</li>
               <li>REST and the web / URIs</li>
               <li>schema technologies, standard vocabularies, validation and workflow</li>
               <li>HTML/CSS/SVG, XSL-FO</li>
            </ul>
         </details>
         <details>
            <summary>Minimal XProc</summary>
            <p xmlns="http://www.w3.org/1999/xhtml">If your skills include XSLT, this might be all you ever need in XProc:</p>
            <ul xmlns="http://www.w3.org/1999/xhtml">
               <li>
                  <code>p:declare-step</code>
               </li>
               <li>
                  <code>p:variable</code>
               </li>
               <li>
                  <code>p:load</code>
               </li>
               <li>
                  <code>p:store</code>
               </li>
               <li>
                  <code>p:xslt</code>
               </li>
               <li>
                  <code>@serialization</code>
               </li>
               <li>
                  <code>@message</code>
               </li>
            </ul>
            <p xmlns="http://www.w3.org/1999/xhtml">Take another lesson on Day Two - learn to write a pipeline and use it as a step</p>
            <ul xmlns="http://www.w3.org/1999/xhtml">
               <li>
                  <code>p:declare-step/@type</code>
               </li>
               <li>
                  <code>p:input</code> and <code>p:with-input</code>
               </li>
               <li>
                  <code>p:output</code>
               </li>
               <li>
                  <code>p:option</code> and <code>p:with-option</code>
               </li>
               <li>
                  <code>p:library</code>
               </li>
            </ul>
            <p xmlns="http://www.w3.org/1999/xhtml">Three everyday utility steps</p>
            <ul xmlns="http://www.w3.org/1999/xhtml">
               <li>
                  <code>p:sink</code>
               </li>
               <li>
                  <code>p:cast-content-type</code>
               </li>
               <li>
                  <code>p:identity</code>
               </li>
            </ul>
         </details>
      </details>
      <hr class="hr">
      <footer class="in-a-row">
         <!-- Add your name here! -->
         <div>
            <b>
               <a class="internal"
                  href="./..">XProc Zone</a>
            </b> was designed and built by Wendell&nbsp;Piez, 2025</div>
         <div>
            <a href="https://github.com/wendellpiez/xproc-zone">Clone the Zone</a>
         </div>
      </footer>
   </body>
</html>